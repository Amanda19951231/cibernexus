<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Dashboard Industrial</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
body {
  margin: 0;
  font-family: 'Segoe UI', sans-serif;
  background-color: #121212;
  color: #fff;
}
.tabs {
  display: flex;
  background-color: #1f1f2f;
  overflow-x: auto;
}
.tab {
  padding: 15px 25px;
  cursor: pointer;
  flex-shrink: 0;
  border-bottom: 3px solid transparent;
  transition: all 0.3s;
}
.tab.active {
  border-bottom: 3px solid #00e0ff;
  color: #00e0ff;
}
.content {
  display: none;
  padding: 20px;
}
.content.active {
  display: block;
}
.alert-container {
  display: flex;
  flex-wrap: wrap;
  gap: 15px;
  margin-bottom: 20px;
}
.alert {
  flex: 1 1 200px;
  padding: 15px;
  border-radius: 12px;
  font-weight: bold;
  display: flex;
  justify-content: space-between;
  align-items: center;
  color: #fff;
  box-shadow: 0 4px 15px rgba(0,0,0,0.5);
  transition: transform 0.2s;
}
.alert:hover {
  transform: translateY(-3px);
}
.alert.active { background-color: #ff4d4d; }
.alert.inactive { background-color: #2ecc71; }
.alert span { font-size: 14px; opacity: 0.9; }
.chart-container {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
  gap: 20px;
}
.chart-box {
  background: linear-gradient(145deg, #1e1e2f, #29293f);
  padding: 20px;
  border-radius: 12px;
  box-shadow: 5px 5px 15px #0a0a15, -5px -5px 15px #22223a;
}
</style>
</head>
<body>

<div class="tabs">
  <div class="tab active" data-target="geral">Dashboard Geral</div>
  <div class="tab" data-target="LASER_001">Corte Laser</div>
  <div class="tab" data-target="PUNC_001">Puncionadeira</div>
  <div class="tab" data-target="SERRA_001">Serra Fita</div>
  <div class="tab" data-target="SOLDA_001">Solda</div>
  <div class="tab" data-target="DOBRA_001">Dobradeira</div>
</div>

<!-- Dashboard Geral -->
<div class="content active" id="geral">
  <div class="chart-container">
    <div class="chart-box"><canvas id="chart_LASER_001"></canvas></div>
    <div class="chart-box"><canvas id="chart_PUNC_001"></canvas></div>
    <div class="chart-box"><canvas id="chart_SERRA_001"></canvas></div>
    <div class="chart-box"><canvas id="chart_SOLDA_001"></canvas></div>
    <div class="chart-box"><canvas id="chart_DOBRA_001"></canvas></div>
  </div>
</div>

<!-- Abas individuais com alertas no topo -->
<div class="content" id="LASER_001">
  <div class="alert-container" id="alerts_LASER_001"></div>
  <div class="chart-box"><canvas id="chart_ind_LASER_001"></canvas></div>
</div>
<div class="content" id="PUNC_001">
  <div class="alert-container" id="alerts_PUNC_001"></div>
  <div class="chart-box"><canvas id="chart_ind_PUNC_001"></canvas></div>
</div>
<div class="content" id="SERRA_001">
  <div class="alert-container" id="alerts_SERRA_001"></div>
  <div class="chart-box"><canvas id="chart_ind_SERRA_001"></canvas></div>
</div>
<div class="content" id="SOLDA_001">
  <div class="alert-container" id="alerts_SOLDA_001"></div>
  <div class="chart-box"><canvas id="chart_ind_SOLDA_001"></canvas></div>
</div>
<div class="content" id="DOBRA_001">
  <div class="alert-container" id="alerts_DOBRA_001"></div>
  <div class="chart-box"><canvas id="chart_ind_DOBRA_001"></canvas></div>
</div>

<script>
const equipamentos = [
  {
    id: "LASER_001",
    dados: {temperatura_interna: 42.5, vibracao: 2.1, consumo_energetico: 15.75, porta_seguranca: 1},
    alertas: {temperatura_alta: false, vibracao_excessiva: true, porta_aberta: false}
  },
  {
    id: "PUNC_001",
    dados: {pressao_hidraulica: 120.5, golpes_por_minuto: 45, emergencia_acionada: 0},
    alertas: {pressao_alta: true, emergencia_ativa: false}
  },
  {
    id: "SERRA_001",
    dados: {velocidade_lâmina: 1250, vibracao: 1.8, temperatura_motor: 65.2},
    alertas: {motor_superaquecendo: false, vibracao_excessiva: false}
  },
  {
    id: "SOLDA_001",
    dados: {corrente: 150.0, tensao: 24.0, fumaca_particulas: 12.5, temperatura_solda: 320.0},
    alertas: {fumaca_excessiva: false, temperatura_alta: true}
  },
  {
    id: "DOBRA_001",
    dados: {pressao_hidraulica: 85.3, alinhamento_lâmina: 0.05, barreira_optica_ativa: 1},
    alertas: {alinhamento_fora_especificacao: false, barreira_violada: false}
  }
];

function simulateData(value) {
  const variation = value * 0.05;
  return +(value + (Math.random() * variation*2 - variation)).toFixed(2);
}

function createLineChart(canvasId, dataObj) {
  const labels = Array.from({length: 20}, (_, i) => `T-${20-i}`);
  const datasets = Object.entries(dataObj).map(([key, val], idx) => ({
    label: key,
    data: labels.map(() => simulateData(val)),
    borderColor: `hsl(${idx*60}, 70%, 60%)`,
    backgroundColor: 'transparent',
    tension: 0.3,
    pointRadius: 3
  }));
  new Chart(document.getElementById(canvasId), {
    type: 'line',
    data: {labels, datasets},
    options: {
      responsive: true,
      plugins: {legend: {labels: {color: '#fff'}}},
      scales: {
        x: {ticks: {color: '#fff'}, grid: {color: '#333'}},
        y: {ticks: {color: '#fff'}, grid: {color: '#333'}}
      }
    }
  });
}

// Cria gráficos e alertas
equipamentos.forEach(eq => {
  createLineChart(`chart_${eq.id}`, eq.dados);
  createLineChart(`chart_ind_${eq.id}`, eq.dados);

  const container = document.getElementById(`alerts_${eq.id}`);
  for (const [alertName, active] of Object.entries(eq.alertas)) {
    const div = document.createElement('div');
    div.className = `alert ${active ? 'active' : 'inactive'}`;
    div.innerHTML = `${alertName.replace(/_/g,' ')} <span>${active ? 'ATIVO' : 'OK'}</span>`;
    container.appendChild(div);
  }
});

// Tabs
document.querySelectorAll('.tab').forEach(tab => {
  tab.addEventListener('click', () => {
    document.querySelectorAll('.tab').forEach(t=>t.classList.remove('active'));
    document.querySelectorAll('.content').forEach(c=>c.classList.remove('active'));
    tab.classList.add('active');
    document.getElementById(tab.dataset.target).classList.add('active');
  });
});
</script>

</body>
</html>
